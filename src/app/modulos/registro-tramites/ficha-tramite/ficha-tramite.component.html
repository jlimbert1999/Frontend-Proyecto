<mat-card class="card border-dark">
    <ng-container *ngIf="Tipo_Vista_Ficha=='Ficha_envio'">
        <mat-card-header style="width: 100%;">
            <div mat-card-avatar class="example-header-image"></div>
            <mat-card-title>{{DatosEnvio.Nombre}} <span class="campo_fecha">{{DatosEnvio.Fecha_Envio|date:'medium'}}</span></mat-card-title>
            <mat-card-subtitle>{{DatosEnvio.NombreCargo}}</mat-card-subtitle>
        </mat-card-header>
    </ng-container>
    <mat-card-content>
        <ng-container *ngIf="Tipo_Vista_Ficha=='Ficha_envio'">
            <p>
                Detalle: {{DatosEnvio.Mensaje}}
            </p>
            <p *ngIf="DatosEnvio.Recibido==false" style="color: red;">
                <span class="badge bg-danger" style="font-style: normal; font-size: 12px;">Usted aun no ha aceptado la recepcion de tramite</span>
            </p>
        </ng-container>

        <div class="card border-dark" *ngIf="Tramite">

            <h4 class="card-header">
                <strong>Tramite: </strong> {{DatosEnvio.Titulo}} / {{Tramite.alterno}}
            </h4>
            <div class="card-body" style="margin-top: 0%">
                <p class="card-text"><strong>Descripcion:</strong> {{Tramite.detalle}} </p>
                <p class="card-text"><strong>Cantidad:</strong> {{Tramite.cantidad}}</p>
                <p class="card-text">
                    <strong>Estado:  </strong> <span class="badge bg-primary text-wrap">
                        {{Tramite.estado | uppercase}}
                    </span>
                </p>
            </div>
        </div>

        <div class="card border-dark" style="margin-top: 10px;" *ngIf="Solicitante">
            <h4 class="card-header">
                <strong>Solcitante: </strong> {{Solicitante.nombres}} {{Solicitante.paterno}} {{Solicitante.materno}}
            </h4>
            <div class="card-body">
                <div class="row">
                    <div class="col">
                        <p class="card-text"><strong>CI: </strong> {{Solicitante.expedido | uppercase}} {{Solicitante.dni}} </p>
                        <p><strong>Telefono:</strong> {{Solicitante.telefono}}</p>
                    </div>
                    <div class="col">
                        <strong>Requerimientostos presentados</strong>
                        <!-- <p class="card-text">Requisitos presentados
                        </p> -->
                        <li *ngFor="let requisito of Requerimientos_presentados">{{requisito.detalle}}</li>

                    </div>
                </div>

            </div>
        </div>

        <div *ngIf="Representante" class="card border-dark" style="margin-top: 10px;">
            <h4 class="card-header">
                <strong>Representante</strong> {{Representante.nombres}} {{Representante.paterno}} {{Representante.materno}}
            </h4>
            <div class="card-body">
                <div class="row">
                    <div class="col">
                        <p class="card-text"><strong>Cedula de intentidad:</strong> {{Representante.expedido | uppercase}} {{Representante.dni}} </p>
                    </div>
                    <div class="col">
                        <p><strong>Telefono:</strong> {{Representante.telefono}}</p>
                    </div>
                </div>
            </div>
        </div>
        <!-- OBSERVACIONES -->
        <mat-tab-group mat-stretch-tabs class="example-stretched-tabs mat-elevation-z4" style="margin-top: 10px;">
            <mat-tab label="Mis observaciones">
                <p style="text-align: center;">
                    <button mat-raised-button [disabled]="DatosEnvio.Recibido!=true && Tipo_Vista_Ficha=='Ficha_envio'" (click)="agregar_observacion()"><mat-icon>add</mat-icon>Agregar observacion</button>
                </p>
                <p *ngIf="mis_observaciones.length==0" style="color: orange; text-align: center; margin-top: 20px;">
                    <mat-icon class="align_txt-icon">report_gmailerrorred</mat-icon> No registro observaciones para este tramite
                </p>

                <table mat-table *ngIf="mis_observaciones.length>0" [dataSource]="mis_observaciones" class="mat-elevation-z8 demo-table">

                    <ng-container matColumnDef="descripcion">
                        <th mat-header-cell *matHeaderCellDef> Descripcion </th>
                        <td mat-cell *matCellDef="let element">{{element.detalle}}</td>
                    </ng-container>

                    <ng-container matColumnDef="estado">
                        <th mat-header-cell *matHeaderCellDef>Situacion</th>
                        <td mat-cell *matCellDef="let element">
                            <p *ngIf="element.situacion==1||element.situacion==true" style="color: green;">
                                <mat-icon>check_circle</mat-icon>
                            </p>
                            <p *ngIf="element.situacion==0||element.situacion==null||element.situacion==false" style="color: red;">
                                <mat-icon>cancel</mat-icon>
                            </p>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="fecha_registro">
                        <th mat-header-cell *matHeaderCellDef> Fecha </th>
                        <td mat-cell *matCellDef="let element"> {{element.fecha_registro |date}} </td>
                    </ng-container>
                    <ng-container matColumnDef="op">
                        <th mat-header-cell *matHeaderCellDef></th>
                        <td mat-cell *matCellDef="let element; let pos=index"> <button mat-icon-button color="primary" (click)="corregir_Observacion(element.id_observacion, pos)"><mat-icon>build_circle</mat-icon></button></td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayColumns_misObservaciones"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayColumns_misObservaciones;"></tr>
                </table>
            </mat-tab>
            <mat-tab label="Otras observaciones">
                <p *ngIf="observaciones.length==0" style="color: orange; text-align: center; margin-top: 20px;">
                    <mat-icon class="align_txt-icon">report_gmailerrorred</mat-icon> No se registraron observaciones para este tramite
                </p>
                <mat-button-toggle-group name="fontStyle" aria-label="Font Style" style="height: 40px; align-items: center;">
                    <mat-button-toggle (click)="accordion.openAll()" value="italic">Ver todos</mat-button-toggle>
                    <mat-button-toggle (click)="accordion.closeAll()" value="underline">Ocultar</mat-button-toggle>
                </mat-button-toggle-group>
                <mat-accordion class="example-headers-align" multi *ngIf="observaciones.length>0">
                    <mat-expansion-panel *ngFor="let obs of observaciones; let i=index">
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                {{obs[0].NombreCar}}
                            </mat-panel-title>
                            <mat-panel-description>
                                {{obs[0].Nombre}} {{obs[0].Apellido_P}} {{obs[0].Apellido_M}}
                                <mat-icon>account_circle</mat-icon>

                            </mat-panel-description>
                        </mat-expansion-panel-header>
                        <table mat-table [dataSource]="obs" class="mat-elevation-z8 demo-table">

                            <ng-container matColumnDef="descripcion">
                                <th mat-header-cell *matHeaderCellDef> Descripcion </th>
                                <td mat-cell *matCellDef="let element"> {{element.detalle}} </td>
                            </ng-container>

                            <ng-container matColumnDef="estado">
                                <th mat-header-cell *matHeaderCellDef>Situacion</th>
                                <td mat-cell *matCellDef="let element">
                                    <p *ngIf="element.situacion==1||element.situacion==true" style="color: green;">
                                        <mat-icon>check_circle</mat-icon>
                                    </p>
                                    <p *ngIf="element.situacion==0||element.situacion==null||element.situacion==false" style="color: red;">

                                        <mat-icon>cancel</mat-icon>
                                    </p>
                                </td>
                            </ng-container>

                            <ng-container matColumnDef="fecha_registro">
                                <th mat-header-cell *matHeaderCellDef> Fecha</th>
                                <td mat-cell *matCellDef="let element"> {{element.fecha_registro|date}} </td>
                            </ng-container>

                            <tr mat-header-row *matHeaderRowDef="displayColumns_Observaciones"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayColumns_Observaciones;"></tr>
                        </table>
                    </mat-expansion-panel>
                </mat-accordion>
            </mat-tab>
        </mat-tab-group>
    </mat-card-content>

    <mat-card-actions>
        <button *ngIf="DatosEnvio.Recibido!=true" mat-button (click)="aceptar_recepcion_tramite()">Aceptar</button>
        <button mat-button *ngIf="DatosEnvio.Recibido==true" (click)="abrir_DialogRemision()">Remitir</button>
        <button mat-button (click)="abrir_DialogRemision()">SHARE</button>
    </mat-card-actions>

</mat-card>