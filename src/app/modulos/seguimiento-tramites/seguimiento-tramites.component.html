<app-navegacion></app-navegacion>
<mat-tab-group mat-align-tabs="center">
    <mat-tab label="Flujo de trabajo">
        <div class="container">
            <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">


                <ng-container matColumnDef="Emisor">
                    <th mat-header-cell *matHeaderCellDef> Emisor</th>
                    <td mat-cell *matCellDef="let element">
                        {{element.NombreEmi}}

                    </td>
                </ng-container>

                <!-- Name Column -->
                <ng-container matColumnDef="Receptor">
                    <th mat-header-cell *matHeaderCellDef> Receptor </th>
                    <td mat-cell *matCellDef="let element"> {{element.NombreRecep}} </td>
                </ng-container>

                <!-- Weight Column -->
                <ng-container matColumnDef="Detalle">
                    <th mat-header-cell *matHeaderCellDef> Detalle </th>
                    <td mat-cell *matCellDef="let element"> {{element.detalle}} </td>
                </ng-container>

                <!-- Symbol Column -->
                <ng-container matColumnDef="Enviado">
                    <th mat-header-cell *matHeaderCellDef> Fecha envio </th>
                    <td mat-cell *matCellDef="let element"> {{element.fecha_envio|date:'MMM d, y, h:mm:ss a'}} </td>
                </ng-container>
                <ng-container matColumnDef="Recibido">
                    <th mat-header-cell *matHeaderCellDef> Fecha recibido </th>
                    <td mat-cell *matCellDef="let element"> {{element.fecha_recibido|date:'MMM d, y, h:mm:ss a'}}</td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>

        </div>


    </mat-tab>



    <mat-tab label="Flujo de trabajo grafico">
        <mat-grid-list cols="3" rowHeight="3:2">
            <mat-grid-tile rowspan="2" colspan="2">
                <ngx-graph class="chart-container" [view]="[800, 500]" [showMiniMap]="true" [links]="links" [nodes]="nodos" [layout]="layout" [autoCenter]="true" [nodeWidth]="300" [nodeHeight]="100" [center$]="center$" (click)="hacerAlgo()">
                    <ng-template #defsTemplate>
                        <svg:marker id="arrow" viewBox="0 -5 10 10" refX="8" refY="0" markerWidth="4" markerHeight="4" orient="auto">
                            <svg:path d="M0,-5L10,0L0,5" class="arrow-head" />
                        </svg:marker>
                    </ng-template>


                    <!-- NODO RECTANGULOS BASICOS -->
                    <!-- <ng-template #nodeTemplate let-node>
                        <svg:g class="node" (click)="click(node.data)">
                            <svg:rect [attr.width]="node.dimension.width" [attr.height]="node.dimension.height" [attr.fill]="node.data.color" />
                            <svg:text alignment-baseline="central" [attr.x]="10" [attr.y]="node.dimension.height / 2">
                                {{node.data.NombreCar}} {{node.data.NombreDep}}
                                <tspan x="10" dy="0">{{node.data.NombreCar}} </tspan>
                                <tspan x="10" dy="15">{{node.data.NombreDep}} </tspan>
                            </svg:text>
                        </svg:g>
                    </ng-template> -->

                    <ng-template #nodeTemplate let-node>
                        <svg:g class="node" width="300" height="150">
                            <svg:foreignObject width="300" height="150">
                                <!-- <xhtml:div class="cardContainer" style="background-color: red;">
                                    <label class="name">{{node.data.NombreCar}}</label>
                                    <label><span><mat-icon>account_circle</mat-icon></span>{{node.data.NombreCar}}</label>
                                    <label>{{node.data.NombreDep}}</label>

                                </xhtml:div> -->
                                <div class="card mb-3" style="max-width: 540px;">
                                    <div class="row g-0">
                                        <div class="col-md-4">
                                            <img src="../../../assets/img/user-mail.png" class="img-fluid rounded-start">
                                        </div>
                                        <div class="col-md-8">
                                            <div class="card-body">
                                                <h5 class="card-title">{{node.data.Nombre}} {{node.data.Apellido_P}} {{node.data.Apellido_M}}</h5>

                                                <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </svg:foreignObject>
                        </svg:g>
                    </ng-template>

                    <ng-template #linkTemplate let-link>
                        <svg:g class="edge">
                            <svg:path class="line" stroke-width="2" marker-end="url(#arrow)"></svg:path>
                            <svg:text class="edge-label" text-anchor="middle">
                                <textPath class="text-path" [attr.href]="'#' + link.id" [style.dominant-baseline]="link.dominantBaseline" startOffset="50%" style="background-color: aqua;" stroke='red'>
                                    {{link.label}}
                                </textPath>
                            </svg:text>
                        </svg:g>
                    </ng-template>
                </ngx-graph>

            </mat-grid-tile>
            <mat-grid-tile rowspan="3" colspan="1" class="lista_ajustada" role="list">
                <mat-grid-tile-header>
                    Informacion tramite

                </mat-grid-tile-header>
                <mat-card style="width: 100%;">
                    <div *ngIf="info_Tramite">
                        <p>Informacion tramite</p>
                        <p>Estado del tramite: {{info_Tramite.estado|uppercase}}</p>

                    </div>
                    <div *ngIf="Info_user">
                        <h3>Informacion usa</h3>
                        <p>Nombre: {{Info_user.Nombre}} {{Info_user.Apellido_P}} {{Info_user.Apellido_M}}</p>
                        <p>Cargo: {{Info_user.NombreCar}} - Departamento:{{Info_user.NombreDep}}</p>
                        <mat-divider></mat-divider>
                    </div>

                    <div *ngIf="observacione_user">
                        <p>Observaciones realizadas</p>
                        <ul>
                            <li *ngFor="let item of observacione_user">
                                {{item.detalle}}
                            </li>
                        </ul>

                    </div>

                </mat-card>






            </mat-grid-tile>
            <mat-grid-tile class="lista_ajustada">
                <button mat-stroked-button color="primary" class="button" (click)="center$.next(true)">Center</button>
                <mat-form-field>
                    <mat-select placeholder="Layout" [ngModel]="layout" (ngModelChange)="setLayout($event)" name="layout">
                        <mat-option *ngFor="let l of layouts" [value]="l.value">
                            {{l.label}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile class="lista_ajustada">
                <mat-list class="lista">
                    <div mat-subheader>Participantes</div>
                    <mat-list-item *ngFor="let user of Participantes">
                        <mat-icon mat-list-icon>perm_identity</mat-icon>
                        <div mat-line>{{user.Nombre}} {{user.Apellido_P}} {{user.Apellido_M}}</div>
                        <div mat-line style="font-size: small;"> {{user.NombreCar}}</div>
                    </mat-list-item>
                </mat-list>
            </mat-grid-tile>
        </mat-grid-list>
    </mat-tab>
</mat-tab-group>